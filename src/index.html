<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ticlock</title>
    <link rel="stylesheet" href="index.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined" rel="stylesheet">
  </head>
  <body>

    <div id="function-in-use"></div>

    <div id="clock-time">10:10</div>

    <div id="ticlock-function-icons-wrapper">
      <span class="material-icons ticlock-function-icons" id="clock-icon">
        schedule
      </span>
      <span class="material-icons ticlock-function-icons" id="timer-icon">
        av_timer
      </span>
      <span class="material-icons-outlined ticlock-function-icons" id="stopwatch-icon">
        timer
      </span>
    </div>
  </body>

  <script>
    let clockIcon = document.getElementById('clock-icon');
    let clockTime = document.getElementById('clock-time');
    let timerIcon = document.getElementById('timer-icon');
    let stopwatchIcon = document.getElementById('stopwatch-icon');
    let functionInUseText = document.getElementById('function-in-use');

    let functionInUse = 'Clock';
    let functionInUseIcon = clockIcon;

    init();

    function init(){
      functionInUseText.innerText = functionInUse;
      functionInUseIcon.classList.add('function-in-use-icon');

      clockIcon.addEventListener('click', ()=>{
        change_function_in_use_icon(functionInUseIcon, clockIcon);
        functionInUse = 'Clock';
        functionInUseText.innerText = functionInUse;
      });
      timerIcon.addEventListener('click', ()=>{
        change_function_in_use_icon(functionInUseIcon, timerIcon);
        functionInUse = 'Timer';
        functionInUseText.innerText = functionInUse;
      });
      stopwatchIcon.addEventListener('click', ()=>{
        change_function_in_use_icon(functionInUseIcon, stopwatchIcon);
        functionInUse = 'Stop Watch';
        functionInUseText.innerText = functionInUse;
      });      

      set_time();
      setInterval(set_time, 1000);
    }

    function change_function_in_use_icon(previous_active_function_icon, new_active_function_icon){
      previous_active_function_icon.classList.remove('function-in-use-icon');
      new_active_function_icon.classList.add('function-in-use-icon');

      functionInUseIcon = new_active_function_icon;
    }

    function set_time(){
      let nowTime = new Date();
      let timeText = prefix_0_if_single_digit(nowTime.getHours()) + ':' + prefix_0_if_single_digit(nowTime.getMinutes()) + ':' + prefix_0_if_single_digit(nowTime.getSeconds());
      clockTime.innerText = timeText;
    }

    function prefix_0_if_single_digit(numeral){return numeral>10 ? String(numeral) : '0'+numeral ;}
    </script>
</html>
